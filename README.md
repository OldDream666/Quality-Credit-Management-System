# <div align=center>å­¦ç”Ÿç´ è´¨å­¦åˆ†ç®¡ç†ç³»ç»Ÿ</div>
<div align=center><img src="https://github.com/OldDream666/Quality-Credit-Management-System/blob/main/images/user_dashboard.png?raw=true"></div>
ä¸€ä¸ªåŸºäº Next.js + TypeScript + PostgreSQL çš„ç°ä»£åŒ–å­¦ç”Ÿç´ è´¨å­¦åˆ†ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå­¦åˆ†ç”³è¯·ã€å®¡æ‰¹ã€ç”¨æˆ·ç®¡ç†ç­‰åŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ**: JWTè®¤è¯ï¼Œæ”¯æŒç”¨æˆ·å/å­¦å·ç™»å½•
- **å­¦åˆ†ç”³è¯·ç®¡ç†**: å¤šç±»å‹ç”³è¯·ï¼ˆä¸ªäººæ´»åŠ¨ã€æ¯”èµ›ã€è¯ä¹¦ï¼‰ï¼Œè‡ªåŠ¨åˆ†æ•°è®¡ç®—
- **å®¡æ‰¹æµç¨‹**: ç­å§”å®¡æ‰¹ï¼Œæ”¯æŒé€šè¿‡/é©³å›ï¼Œé©³å›åŸå› è®°å½•
- **æ–‡ä»¶ç®¡ç†**: å¤šæ–‡ä»¶ä¸Šä¼ ï¼Œæ”¯æŒå›¾ç‰‡å’ŒPDFæ ¼å¼
- **ç”¨æˆ·ç®¡ç†**: ç®¡ç†å‘˜å¯ç®¡ç†ç”¨æˆ·ï¼Œæ”¯æŒæ‰¹é‡å¯¼å…¥
- **å…¬å‘Šç³»ç»Ÿ**: ç³»ç»Ÿå…¬å‘Šå‘å¸ƒå’Œç®¡ç†
- **ç³»ç»Ÿé…ç½®**ï¼šè§’è‰²ã€å­¦åˆ†ç±»å‹æ”¯æŒåŠ¨æ€é…ç½®
- **æ•°æ®ç»Ÿè®¡**: å®æ—¶ç»Ÿè®¡å’Œå¯è§†åŒ–å±•ç¤º

### ğŸ” æƒé™ç³»ç»Ÿ
- **ç®¡ç†å‘˜(admin)**: å…¨å±€ç®¡ç†æƒé™
- **å­¦ç”Ÿ(student)**: ç”³è¯·å­¦åˆ†ï¼ŒæŸ¥çœ‹ä¸ªäººçŠ¶æ€
- **ç­é•¿(monitor)**: å®¡æ‰¹æƒé™
- **å›¢æ”¯ä¹¦(league_secretary)**: å®¡æ‰¹æƒé™  
- **å­¦ä¹ å§”å‘˜(study_committee)**: å®¡æ‰¹æƒé™

### ğŸ¨ æŠ€æœ¯ç‰¹æ€§
- **ç°ä»£åŒ–UI**: Tailwind CSS + å“åº”å¼è®¾è®¡
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰
- **æ€§èƒ½ä¼˜åŒ–**: æ•°æ®åº“ç´¢å¼•ã€APIç¼“å­˜ã€ä»£ç åˆ†å‰²
- **å®‰å…¨æ€§**: æ–‡ä»¶ç±»å‹éªŒè¯ã€å¤§å°é™åˆ¶ã€SQLæ³¨å…¥é˜²æŠ¤
- **å¯ç»´æŠ¤æ€§**: ç»„ä»¶åŒ–æ¶æ„ã€ç»Ÿä¸€APIå®¢æˆ·ç«¯ã€è‡ªå®šä¹‰Hook

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- PostgreSQL 12+
- npm æˆ– yarn

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/OldDream666/Quality-Credit-Management-System.git
cd student
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
```

3. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
cp env.example .env.local
```
ç¼–è¾‘ `.env.local` æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥ç­‰ä¿¡æ¯ã€‚

4. **æ•°æ®åº“è®¾ç½®**

**ä½¿ç”¨å¯¼å‡ºçš„æ•°æ®åº“ç»“æ„**
```bash
# åˆ›å»ºæ•°æ®åº“
createdb student_credits

# å¯¼å…¥å®Œæ•´çš„æ•°æ®åº“ç»“æ„
psql -d migrations\database_schema.sql
```

5. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
npm run dev
```

6. **è®¿é—®åº”ç”¨**
æ‰“å¼€æµè§ˆå™¨è®¿é—® [http://localhost:3000](http://localhost:3000)



## ğŸ”§ æ•°æ®åº“è¡¨ç»“æ„

### ä¸»è¦è¡¨ç»“æ„ï¼ˆéƒ¨åˆ†å­—æ®µï¼‰

| è¡¨å            | å­—æ®µï¼ˆéƒ¨åˆ†ï¼‰                                                                                 | è¯´æ˜                       |
|-----------------|---------------------------------------------------------------------------------------------|----------------------------|
| users           | id, username, password, role, name, student_id, grade, major, class, created_at             | ç”¨æˆ·ä¿¡æ¯ï¼Œusername/student_id å”¯ä¸€ |
| grades          | id, name                                                                                    | å¹´çº§                       |
| majors          | id, name                                                                                    | ä¸“ä¸š                       |
| classes         | id, name, grade_id, major_id                                                                | ç­çº§ï¼Œ(name, grade_id, major_id) ç»„åˆå”¯ä¸€ |
| credits         | id, user_id, type, description, score, status, created_at, approver_id, approved_at         | å­¦åˆ†ç”³è¯·                   |
| credits_proofs  | id, credit_id, file, filename, mimetype, created_at                                         | å­¦åˆ†è¯æ˜ææ–™               |
| notices         | id, title, content, created_at                                                              | å…¬å‘Š                       |
| login_attempts  | username, count, last_attempt                                                               | ç™»å½•å°è¯•è®°å½•               |
| system_config   | id, category, config_key, config_value, is_active, created_at, updated_at                   | ç³»ç»Ÿé…ç½®ï¼ˆè§’è‰²ã€ç±»å‹ç­‰ï¼‰   |

> è¯¦ç»†å­—æ®µè¯·å‚è€ƒ migrations/database_schema.sqlã€‚

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### å·²å®æ–½çš„å®‰å…¨æªæ–½

- âœ… **è¾“å…¥éªŒè¯**: å®Œæ•´çš„æœåŠ¡å™¨ç«¯è¾“å…¥éªŒè¯ï¼Œé˜²æ­¢æ¶æ„è¾“å…¥
- âœ… **æƒé™æ§åˆ¶**: åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)ï¼Œç»†ç²’åº¦æƒé™ç®¡ç†
- âœ… **è®¤è¯å®‰å…¨**: JWT token è®¤è¯ï¼Œå‡å°‘æ•æ„Ÿä¿¡æ¯æ³„éœ²é£é™©
- âœ… **æ–‡ä»¶å®‰å…¨**: ä¸¥æ ¼çš„æ–‡ä»¶ç±»å‹å’Œå¤§å°é™åˆ¶ï¼Œé˜²æ­¢æ¶æ„æ–‡ä»¶ä¸Šä¼ 
- âœ… **CSRFé˜²æŠ¤**: CSRF token æœºåˆ¶ï¼Œé˜²æ­¢è·¨ç«™è¯·æ±‚ä¼ªé€ 
- âœ… **é”™è¯¯å¤„ç†**: å®‰å…¨çš„é”™è¯¯ä¿¡æ¯å¤„ç†ï¼Œé¿å…ä¿¡æ¯æ³„éœ²
- âœ… **æ•°æ®ä¿æŠ¤**: å¯†ç åŠ å¯†å­˜å‚¨ï¼Œå‚æ•°åŒ–æŸ¥è¯¢é˜²æ­¢SQLæ³¨å…¥
- âœ… **ç™»å½•ä¿æŠ¤**: é€šè¿‡ `login_attempts` è¡¨é˜²æ­¢æš´åŠ›ç ´è§£

### å®‰å…¨æœ€ä½³å®è·µ

1. **å¼€å‘ç¯å¢ƒ**
   - ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿé…ç½®
   - å®šæœŸæ›´æ–°ä¾èµ–åŒ…
   - ä»£ç å®¡æŸ¥æ—¶å…³æ³¨å®‰å…¨é—®é¢˜
   - ä½¿ç”¨TypeScriptè¿›è¡Œç±»å‹å®‰å…¨å¼€å‘

2. **ç”Ÿäº§ç¯å¢ƒ**
   - å¯ç”¨HTTPS
   - è®¾ç½®å®‰å…¨çš„HTTPå¤´
   - é…ç½®CORSç­–ç•¥
   - å®šæœŸå¤‡ä»½æ•°æ®
   - ç›‘æ§ç³»ç»Ÿæ—¥å¿—

3. **ç”¨æˆ·ç®¡ç†**
   - å¼ºå¯†ç ç­–ç•¥
   - è´¦æˆ·é”å®šæœºåˆ¶
   - ä¼šè¯è¶…æ—¶è®¾ç½®
   - å¤šå› ç´ è®¤è¯ï¼ˆå¯é€‰ï¼‰


## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. **åˆ›å»ºç±»å‹å®šä¹‰** (`src/types/index.ts`)
2. **æ·»åŠ APIè·¯ç”±** (`src/app/api/`)
3. **åˆ›å»ºè‡ªå®šä¹‰Hook** (`src/hooks/`)
4. **å¼€å‘UIç»„ä»¶** (`src/components/`)
5. **ç¼–å†™é¡µé¢** (`src/app/`)

### ä»£ç è§„èŒƒ

- ä½¿ç”¨TypeScriptè¿›è¡Œç±»å‹æ£€æŸ¥
- éµå¾ªESLintè§„åˆ™
- ä½¿ç”¨Prettieræ ¼å¼åŒ–ä»£ç 
- ç»„ä»¶ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ + Hooks
- APIä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯å¤„ç†

### æ•°æ®åº“è¿ç§»

åˆ›å»ºæ–°çš„è¿ç§»æ–‡ä»¶ï¼š
```sql
-- migrations/YYYYMMDD_description.sql
-- æ·»åŠ ä½ çš„SQLè¯­å¥
```

### æ•°æ®åº“ç»´æŠ¤

#### å¤‡ä»½æ•°æ®åº“
```bash
# å®Œæ•´å¤‡ä»½
pg_dump -h localhost -U postgres -d student_credits > backup_$(date +%Y%m%d_%H%M%S).sql

# ä»…ç»“æ„å¤‡ä»½
pg_dump -h localhost -U postgres -d student_credits --schema-only > schema_backup.sql

# ä»…æ•°æ®å¤‡ä»½
pg_dump -h localhost -U postgres -d student_credits --data-only > data_backup.sql
```

#### æ¢å¤æ•°æ®åº“
```bash
psql -h localhost -U postgres -d student_credits < backup_file.sql
```

#### å®šæœŸç»´æŠ¤
```sql
-- æ¸…ç†è¿‡æœŸæ•°æ®
DELETE FROM login_attempts WHERE last_attempt < CURRENT_TIMESTAMP - INTERVAL '30 days';
DELETE FROM credits WHERE status = 'rejected' AND created_at < CURRENT_TIMESTAMP - INTERVAL '1 year';

-- æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
ANALYZE users;
ANALYZE credits;
ANALYZE credits_proofs;
ANALYZE notices;
```

## ğŸš€ éƒ¨ç½²

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. **æ„å»ºé¡¹ç›®**
```bash
npm run build
```

2. **å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨**
```bash
npm start
```

### Dockeréƒ¨ç½²

```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
```


## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥æ•°æ®åº“æœåŠ¡æ˜¯å¦å¯åŠ¨
   - éªŒè¯è¿æ¥å­—ç¬¦ä¸²æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤æ•°æ®åº“ç”¨æˆ·æƒé™

2. **æ–‡ä»¶ä¸Šä¼ å¤±è´¥**
   - æ£€æŸ¥æ–‡ä»¶å¤§å°é™åˆ¶
   - éªŒè¯æ–‡ä»¶ç±»å‹æ˜¯å¦å…è®¸
   - ç¡®è®¤å­˜å‚¨ç›®å½•æƒé™

3. **æƒé™éªŒè¯å¤±è´¥**
   - æ£€æŸ¥ JWT token æ˜¯å¦æœ‰æ•ˆ
   - ç¡®è®¤ç”¨æˆ·è§’è‰²é…ç½®
   - éªŒè¯ API è·¯ç”±æƒé™è®¾ç½®

4. **æ•°æ®åº“ç»“æ„é—®é¢˜**
   - ä½¿ç”¨å¯¼å‡ºçš„ç»“æ„æ–‡ä»¶é‡æ–°åˆ›å»ºæ•°æ®åº“
   - æ£€æŸ¥ç´¢å¼•æ˜¯å¦æ­£ç¡®åˆ›å»º
   - éªŒè¯å¤–é”®çº¦æŸæ˜¯å¦å®Œæ•´

### æ—¥å¿—æŸ¥çœ‹

- å¼€å‘ç¯å¢ƒï¼šæ§åˆ¶å°è¾“å‡º
- ç”Ÿäº§ç¯å¢ƒï¼šæŸ¥çœ‹åº”ç”¨æ—¥å¿—æ–‡ä»¶

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- é‚®ç®±ï¼š2876757609@qq.com
- é—®é¢˜åé¦ˆï¼š[GitHub Issues](https://github.com/OldDream666/Quality-Credit-Management-System/issues)

## ğŸ“‹ æ›´æ–°æ—¥å¿—

### v1.1.0 (2025-07-04)
- æ–°å¢ç³»ç»Ÿé…ç½®ï¼Œè§’è‰²ã€å­¦åˆ†ç±»å‹ç­‰é…ç½®ç»Ÿä¸€å­˜å‚¨äº system_configï¼Œæ— å•ç‹¬ roles è¡¨
- classes è¡¨å”¯ä¸€çº¦æŸè°ƒæ•´ä¸º (name, grade_id, major_id) ç»„åˆå”¯ä¸€
- ç”¨æˆ·æ‰¹é‡å¯¼å…¥æ”¯æŒâ€œæœ‰åˆ™æ›´æ–°ï¼Œæ— åˆ™æ’å…¥â€ï¼Œè‡ªåŠ¨æ ¡éªŒå”¯ä¸€æ€§
- å¯†ç åŠ å¯†ä¸å®‰å…¨æ€§å¢å¼ºï¼Œæ‰€æœ‰å¯†ç å‡ç”¨ bcryptjs åŠ å¯†
- å®¡æ‰¹å†å²ä¸­æ–°å¢å®¡æ‰¹äººæ˜¾ç¤º
- å®¡æ‰¹å†å²ä¸­æ–°å¢å¯¼å‡ºæ•°æ®åŠŸèƒ½
- æ–‡ä»¶/å›¾ç‰‡æ¥å£ä¼˜åŒ–ï¼Œimg å¯ç›´æ¥å¼•ç”¨ proof-file æ¥å£
- æƒé™ä¸é‰´æƒæœºåˆ¶å®Œå–„ï¼Œæ‰€æœ‰æ•æ„ŸAPIå‡éœ€å¸¦æœ‰æ•ˆtoken
- å­¦åˆ†ç±»å‹æ”¯æŒè®¾ç½®å¯¹åº”çš„ç­å§”è§’è‰²è¿›è¡Œå®¡æ‰¹
- å…¶å®ƒå®‰å…¨ä¸ä½“éªŒä¼˜åŒ–

### v1.0.0 (2025-06-29)
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- åŸºç¡€åŠŸèƒ½å®ç°
- å®‰å…¨æªæ–½å®Œå–„
- æƒé™æ§åˆ¶ç³»ç»Ÿ
- æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
- å®Œæ•´çš„æ•°æ®åº“ç»“æ„
- ç»„ç»‡æ¶æ„ç®¡ç†
- ç™»å½•å®‰å…¨ä¿æŠ¤æœºåˆ¶
